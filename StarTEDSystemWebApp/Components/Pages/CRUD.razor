@page "/crud"

<PageTitle>CRUD - StarTED</PageTitle>
<h3>CRUD - StarTED</h3>

@* Error Validation *@
@if (errorList.Count > 0)
{
    <div class="alert alert-danger">
        <p class="mb-3">Please fix the following issues:</p>
        <ul>
            @foreach (var error in errorList)
            {
                <li>@error</li>
            }
        </ul>
    </div>
}
else if (feedback != null && feedback != "")
{
    <div class="alert alert-info">
        @feedback
    </div>
}

<div class="container border py-3">
    <div>
        <fieldset>
            <legend>Program Courses</legend>

            <section id="main-menu" class="">
                @* Display the programs *@

                @if (Programs == null)
                {
                    <div id="menu-program-courses">
                        <div>
                            <p>Loading Programs. . .</p>
                        </div>
                    </div>
                }
                else
                {
                    
                }
                <div id="menu-program-courses">
                    <label class="col-1" for="program-info">Program:</label>
                    <select class="form-select" id="program-info" @onchange="HandleSelectedProgram">
                        <option selected value="0" >Select a Program</option>
                        @if (Programs != null)
                        {
                            foreach (var prog in Programs)
                            {
                                <option value="@prog.ProgramId">@prog.ProgramName</option>
                            }                           
                        }
                        else
                        {
                            <div>
                                No  cursos
                            </div>
                        }
                    </select>
                </div>

                <div id="select-program-course">
                    <label for="course-name" class="col-1">Course:</label>
                    <select class="form-select" id="course-name" @onchange="HandleSelectedCourse">
                        <option selected value="0" >Select a Course</option>
                        @if (ProgramCourses != null)
                        {
                            foreach (var pc in ProgramCourses)
                            {
                                <option value="@pc.CourseId">@pc.Course.CourseName</option>
                            }
                        }
                    </select>
                </div>

                @if (Course != null)
                {
                <div>
                    <label for="course-credits" class="col-1">Credits:</label>
                    <input id="course-credits" @bind-value="Course.Credits"  />
                </div>
                <div>
                    <label for="total-hours" class="col-1">Total Hours:</label>
                        <input id="total-hours" @bind-value="Course.TotalHours" />
                </div>
                <div>
                    <label for="term" class="col-1">Term:</label>
                        <input id="term" @bind-value="Course.Term" />
                </div>
                <div>
                    <label for="tuition" class="col-1">Tuition:</label>
                        <input id="tuition" @bind-value="Course.Tuition"/>
                </div>
                <div>
                    <label for="course-description">Description:</label>
                        <input class="form-control" rows="3" id="course-description" @bind-value="Course.Description"></input>
                </div>
                <div>
                    <label for="required" class="col-1">Required:</label>
                    <input type="checkbox" id="required" @bind="Required" />
                </div>
                <div>
                    <label for="comments">Comments:</label>
                    <textarea class="form-control" rows="3" id="comments" @bind="Comments" />
                </div>
                <div>
                    <label for="active" class="col-1">Active:</label>
                    <input type="checkbox" id="active" @bind="Active" />
                </div>

                }
                
            </section>

            <section class="d-flex">
                <div id="menu-buttons" class="w-75 m-auto ">
                    <div>
                        <button class="btn btn-primary" @onclick="OnHandleAddProgramCourse">Add Course</button>
                    </div>
                    <div>
                        <button class="btn btn-secondary">Edit Course</button>
                    </div>
                    <div>
                       <button class="btn btn-danger">Delete Course</button>
                    </div>

                    <div>
                        <button class="btn btn-outline-primary" @onclick="ClearFields">Clear</button>
                    </div>
                </div>
            </section>


        </fieldset>
    </div>
</div>